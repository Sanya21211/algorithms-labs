def floyd_warshall(nodes, edges):
    n = len(nodes)
    index = {nodes[i]: i for i in range(n)}
    INF = float('inf')
    D = [[INF]*n for _ in range(n)]
    for i in range(n):
        D[i][i] = 0
    for u, v, w in edges:
        i, j = index[u], index[v]
        D[i][j] = min(D[i][j], w)
        D[j][i] = min(D[j][i], w)
    for k in range(n):
        for i in range(n):
            for j in range(n):
                if D[i][k] + D[k][j] < D[i][j]:
                    D[i][j] = D[i][k] + D[k][j]
    return D
