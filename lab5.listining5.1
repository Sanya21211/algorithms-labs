import heapq
# ---------- Prim ----------
def prim_mst(graph, start=1):
    visited = set([start])
    edges = []
    mst = []
    for v, w in graph[start]:
        heapq.heappush(edges, (w, start, v))
    while edges:
        w, u, v = heapq.heappop(edges)
        if v not in visited:
            visited.add(v)
            mst.append((u, v, w))
            for to, w2 in graph[v]:
                if to not in visited:
                    heapq.heappush(edges, (w2, v, to))
    return mst
# ---------- Kruskal ----------
def find(p, x):
    if p[x] != x:
        p[x] = find(p, p[x])
    return p[x]
def union(p, r, x, y):
    x, y = find(p, x), find(p, y)
    if r[x] < r[y]:
        p[x] = y
    else:
        p[y] = x
        if r[x] == r[y]:
            r[x] += 1
def kruskal(edges, n):
    p = {i: i for i in range(1, n+1)}
    r = {i: 0 for i in range(1, n+1)}
    mst = []
    edges = sorted(edges, key=lambda x: x[2])
    for u, v, w in edges:
        if find(p, u) != find(p, v):
            mst.append((u, v, w))
            union(p, r, u, v)
    return mst
# ---------- Graph input ----------
graph = {
    1: [(2,2),(4,1),(3,5),(7,1)],
    2: [(1,2),(4,3),(5,9)],
    3: [(1,5),(4,4),(5,2),(7,4),(8,4)],
    4: [(1,1),(2,3),(5,9),(6,2),(3,4),(7,9)],
    5: [(2,9),(4,9),(6,3),(3,2)],
    6: [(4,2),(5,3),(8,1)],
    7: [(1,1),(3,4),(8,6),(4,9)],
    8: [(3,4),(7,6),(6,1)]
}
edges_list = []
for u in graph:
    for v, w in graph[u]:
        if u < v:
            edges_list.append((u, v, w))
print("Prim MST:", prim_mst(graph))
print("Kruskal MST:", kruskal(edges_list, 8))
